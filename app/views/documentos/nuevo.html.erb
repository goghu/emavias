<!-- <p id="notice"><%# notice %></p> -->
<style type="text/css">
  input[type=checkbox]
  {
    /* Double-sized Checkboxes */
    -ms-transform: scale(2); /* IE */
    -moz-transform: scale(2); /* FF */
    -webkit-transform: scale(2); /* Safari and Chrome */
    -o-transform: scale(2); /* Opera */
    padding: 10px;
  }
</style>

<% if notice.present? %>
  <div class="alert alert-success"> 
    <i class="ti-user"></i>&nbsp;&nbsp;<%= notice %>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close"> <span aria-hidden="true">Ã—</span> </button>
  </div>  
<% end %>

<div class="row page-titles">
  <div class="col-md-6 col-8 align-self-center">
    <h3 class="text-themecolor m-b-0 m-t-0">
      <span style="color: #000000;">Camino: </span><%= @camino.ruta.nombre %>
      <h3><%= @camino.unidade.descripcion %> (<%= @camino.cargo.descripcion %>)</h3>
    </h3>
  </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-body">

        <div class="row">
          <div class="col-md-4">

          <div class="row">
            <%= form_tag('/rutas/guarda_camino') do %>
            <div class="col-md-8">
              <%= select("camino", "unidade_id", Unidade.all.collect {|u| [ u.descripcion, u.id ] }, {include_blank: 'Seleccione Unidad'}, {class: 'form-control', required: true}) %>
            </div>
            <div class="col-md-12">
              <div id="carga_cargos">
                <%= select("camino", "cargo_id", Cargo.all.collect {|u| [ u.descripcion, u.id ] }, {include_blank: 'Seleccione Cargo'}, {class: 'form-control'}) %>
              </div>
            </div>
            <div class="col-md-4">
              <%= number_field_tag('camino[correlativo]', nil, class: 'form-control', required: true, min: 1) %>
              <%= hidden_field_tag('camino[ruta_id]', @ruta.id) %>
              <%= submit_tag("Guardar") %>
            </div>
            <% end %>
          </div>
        </div>

          <div class="col-md-8">
            <% if @caminos.present? %>

            <table class="table table-bordered" id="myTable">
              <thead>
                <tr>
                  <th>Unidad</th>
                  <th>Funcionario</th>
                  <th>No.</th>
                  <th></th>
                </tr>
              </thead>

              <tbody>
                <% @caminos.each do |camino| %>
                <tr>
                  <td><%= camino.unidade.descripcion %></td>
                  <td><%= camino.cargo.descripcion %></td>
                  <td><%= camino.correlativo %></td>
                  <td>
                    <a href="<%= url_for(controller: 'documentos', action: 'nuevo', id_camino: camino.id) %>" class="btn btn-success" title="Adicionar Documentos"><i class="fa fa-files-o"></i></a>
                    <a href="<%= url_for(controller: 'alternativos', action: 'nuevo', id_camino: camino.id) %>" class="btn btn-warning" title="Caminos Alternativos"><i class="fa fa-question-circle"></i></a>
                    <a href="<%= url_for(controller: 'caminos', action: 'eliminar', id_camino: camino.id, cod_ruta: camino.ruta_id) %>" class="btn btn-danger" title="Eliminar"><i class="fa fa-times"></i></a>
                  </td>
                </tr>
                <% end %>
              </tbody>
            </table>
            <% else %>
            No tiene unidades
            <% end %>

          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <%= form_tag('/documento/guarda_nuevo') do %>
    <%= hidden_field_tag('camino_id', @camino.id) %>
    <%= text_field_tag('descripcion', nil, :required => true, maxlength: '150') %>
    <select name="tipo" required>
      <option value="">Seleccione Tipo</option>
      <option value="ca">Campo Abierto</option>
      <option value="nv">No Visisble</option>
    </select>
    <input type="checkbox" name="presento" checked>&nbsp;&nbsp; Documento Adjunto</label>
    <%= submit_tag("Guardar") %>
    <% end %>
  </div>
  <div class="col-md-6">
    <% if @listado_documentos.present? %>

    <table class="table table-bordered" id="myTable">
      <thead>
        <tr>
          <th>Descripcion</th>
          <th>Tipo</th>
          <!-- <th>Presento</th> -->
          <th></th>
        </tr>
      </thead>

      <tbody>
        <% @listado_documentos.each do |ld| %>
        <tr>
          <td><%= ld.descripcion %></td>
          <td>
            <% if ld.tipo == 'ca' %>
              Campo Abierto
            <% else %>
              No Visible
            <% end %>
          </td>
          <!-- <td><%# ld.presento %></td> -->
          <td>
            <%# link_to 'Ver', rutum %>
            <%# link_to 'Editar', edit_rutum_path(rutum.id) %>
            <%# link_to 'Caminos', ruta_ver_caminos_path(rutum) %>
            <%= link_to 'Eliminar', controller: 'documentos', action: 'eliminar', id_documento: ld.id, id_camino: @camino.id %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
    <% else %>
    No tiene unidades
    <% end %>

  </div>
</div>

<br>
<%= link_to 'Nueva Ruta', new_rutum_path %>
<% content_for :add_css do %>
<link href="<%= asset_path '/assets/plugins/toast-master/css/jquery.toast.css' %>" rel="stylesheet">
<link href="<%= asset_path '/assets/plugins/sweetalert/sweetalert.css' %>" rel="stylesheet" type="text/css">
<% end %>
<% content_for :add_js do %>
<script src="<%= asset_path '/assets/plugins/datatables/jquery.dataTables.min.js' %>"></script>
<script src="<%= asset_path '/js/validation.js' %>"></script>
<script src="<%= asset_path '/assets/plugins/toast-master/js/jquery.toast.js' %>"></script>
<script src="<%= asset_path '/assets/plugins/sweetalert/sweetalert.min.js' %>"></script>
<script type="text/javascript">

  $(document).ready(function () {
    // console.log( "ready!" );
    $("#camino_unidade_id").change(function () {
      //alert('Hizo cambio');
      var id_unidad = $("#camino_unidade_id").val();
      $("#carga_cargos").load("/rutas/muestra_cargos/" + id_unidad);
    });
  });

  var table5 = $('#myTable').DataTable({
    "oLanguage": {
      "sUrl": "https://cdn.datatables.net/plug-ins/1.10.16/i18n/Spanish.json"
    },
    aaSorting: [[1, 'asc']]
  });
</script>
<% end %>